# Telegram Monitor System

–ì–∏–±—Ä–∏–¥–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã—Ö Telegram-—á–∞—Ç–æ–≤.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–°–∏—Å—Ç–µ–º–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞ –Ω–∞ –ø—Ä–∏–Ω—Ü–∏–ø–µ **—Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏**:

- **Collector** (Telethon) ‚Äî —Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –∏–∑ —á–∞—Ç–æ–≤
- **Analyzer** (LLM + Whisper) ‚Äî –∞–Ω–∞–ª–∏–∑ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- **Manager** (aiogram) ‚Äî —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- **Storage** (SQLite + Google Sheets) ‚Äî —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
admin_chat_bot/
‚îú‚îÄ‚îÄ config/             # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ .env.example    # –®–∞–±–ª–æ–Ω –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ settings.py     # Pydantic –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îú‚îÄ‚îÄ sessions/       # Telethon session files
‚îÇ   ‚îî‚îÄ‚îÄ temp/           # –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (–≥–æ–ª–æ—Å–æ–≤—ã–µ)
‚îú‚îÄ‚îÄ logs/               # –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ collector/      # Telethon Userbot
‚îÇ   ‚îú‚îÄ‚îÄ manager/        # aiogram Bot
‚îÇ   ‚îú‚îÄ‚îÄ core/           # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (Analyzer, LLM, Whisper)
‚îÇ   ‚îú‚îÄ‚îÄ storage/        # SQLite + Google Sheets
‚îÇ   ‚îú‚îÄ‚îÄ scheduler/      # APScheduler –∑–∞–¥–∞—á–∏
‚îÇ   ‚îú‚îÄ‚îÄ models/         # Pydantic –º–æ–¥–µ–ª–∏
‚îÇ   ‚îî‚îÄ‚îÄ utils/          # –£—Ç–∏–ª–∏—Ç—ã, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îú‚îÄ‚îÄ tests/              # –¢–µ—Å—Ç—ã
‚îú‚îÄ‚îÄ main.py             # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îî‚îÄ‚îÄ requirements.txt    # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# 1. –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
python -m venv venv
venv\Scripts\activate  # Windows

# 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt

# 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
copy config\.env.example config\.env
# –ó–∞–ø–æ–ª–Ω–∏—Ç–µ .env —Å–≤–æ–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Google Sheets

1. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –≤ [Google Cloud Console](https://console.cloud.google.com/).
2. –í–∫–ª—é—á–∏—Ç–µ **Google Sheets API** –∏ **Google Drive API**.
3. –°–æ–∑–¥–∞–π—Ç–µ **Service Account** –∏ —Å–∫–∞—á–∞–π—Ç–µ JSON-—Ñ–∞–π–ª —Å –∫–ª—é—á–∞–º–∏.
4. –ü–µ—Ä–µ–∏–º–µ–Ω—É–π—Ç–µ –µ–≥–æ –≤ `service_account.json` –∏ –ø–æ–ª–æ–∂–∏—Ç–µ –≤ –ø–∞–ø–∫—É `config/`.
5. –°–æ–∑–¥–∞–π—Ç–µ Google –¢–∞–±–ª–∏—Ü—É –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤—å—Ç–µ –¥–æ—Å—Ç—É–ø (Editor) —Å–µ—Ä–≤–∏—Å–Ω–æ–º—É –∞–∫–∫–∞—É–Ω—Ç—É (–µ–≥–æ email).
6. –í —Ç–∞–±–ª–∏—Ü–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ª–∏—Å—Ç—ã: `–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è`, `–ò–Ω—Ü–∏–¥–µ–Ω—Ç—ã`, `–£—á–∞—Å—Ç–Ω–∏–∫–∏`, `–õ–æ–≥–∏ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è`.

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

–°–∏—Å—Ç–µ–º–∞ –≤–∫–ª—é—á–∞–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º—ã –ø–æ–≤—ã—à–µ–Ω–∏—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏:
- **Telegram FloodWait**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–∞—É–∑–∞ –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–æ–≤ Telegram.
- **LLM API Retries**: —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –∏ –ø–æ–≤—Ç–æ—Ä—ã –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö API.
- **Fallback Logging**: –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –≤ –ª–æ–∫–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã –∏ SQLite –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤.

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [–¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ](TZ_hybrid.md)
- [–ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏](implementation_hybrid.md)

## –°—Ç–∞—Ç—É—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

‚úÖ **–≠—Ç–∞–ø 1 (MVP)** ‚Äî –ó–∞–≤–µ—Ä—à–µ–Ω (–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è, –ë–∞–∑–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑, –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è)
‚úÖ **–≠—Ç–∞–ø 2 (–î–æ—Ä–∞–±–æ—Ç–∫–∞ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è)** ‚Äî –ó–∞–≤–µ—Ä—à–µ–Ω (–ì–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è, –ß–∞–Ω–∫–∏–Ω–≥ LLM, –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤, Anti-Flood)
üöß **–≠—Ç–∞–ø 3** ‚Äî (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

